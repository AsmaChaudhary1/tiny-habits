<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tiny Habits ‚Äî Cute Habit Tracker</title>

  <!-- Fonts (Google Fonts) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Pacifico&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #FFF8F5;
      --card: #fff;
      --muted: #8a7f7a;
      --accent: #FFB6C1; 
      --accent-2: #FDE68A; 
      --accent-3: #C7F9E6; 
      --glass: rgba(255,255,255,0.6);
      --shadow: 0 8px 24px rgba(20,20,30,0.06);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,var(--bg), #FFFDFB);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
      color:#2b2b2b;
      position:relative;
    }

    .app {
      width:100%;
      max-width:860px;
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.95));
      border-radius:24px;
      box-shadow:var(--shadow);
      padding:28px;
      position:relative;
      overflow:hidden;
      z-index:1;
    }

    .bubble {
      position:absolute;
      width:220px;height:220px;border-radius:50%;
      filter:blur(18px);
      opacity:0.7;
      z-index:0;
    }
    .bubble.pink{ background: radial-gradient(circle at 30% 30%, var(--accent), transparent 60%); top:-60px; left:-60px; }
    .bubble.mint{ background: radial-gradient(circle at 70% 50%, var(--accent-3), transparent 60%); bottom:-80px; right:-80px; }

    header{
      display:flex;
      align-items:center;
      gap:14px;
      z-index:1;
      position:relative;
    }
    .logo {
      width:64px;height:64px;border-radius:12px;
      background: linear-gradient(135deg,var(--accent),var(--accent-2));
      display:flex;align-items:center;justify-content:center;
      color:white;font-weight:600;font-family:"Pacifico";
      font-size:20px;box-shadow:0 8px 20px rgba(255,182,193,0.25);
    }
    h1{margin:0;font-size:20px}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .main {
      display:grid;
      grid-template-columns: 1fr 320px;
      gap:18px;
      margin-top:18px;
      position:relative;
      z-index:1;
    }

    .tracker-card{
      background:var(--card);
      border-radius:12px;padding:18px;box-shadow:var(--shadow);
      min-height:260px;
    }
    .controls{
      display:flex;gap:8px;align-items:center;margin-bottom:12px;
    }
    input[type="text"].new-habit{
      flex:1;padding:10px;border-radius:10px;border:1px solid #F0EAEA;
      font-size:14px;outline:none;
      background:linear-gradient(180deg, #FFF, #FCFBFA);
    }
    button.add{
      padding:10px 12px;border-radius:10px;border:none;background:var(--accent);
      font-weight:600;color:white;cursor:pointer;
      box-shadow:0 6px 14px rgba(255,182,193,0.2);
    }
    .habit-list{display:flex;flex-direction:column;gap:10px;margin-top:8px}

    .habit {
      display:flex;align-items:center;gap:12px;padding:10px;border-radius:12px;
      border:1px solid #F5EEEE;background:linear-gradient(180deg,#fff,#fff);
      justify-content:space-between;
    }
    .left {
      display:flex;align-items:center;gap:12px;
    }
    .check {
      width:44px;height:44px;border-radius:10px;border:2px solid #F0EAEA;
      display:flex;align-items:center;justify-content:center;font-size:20px;
      cursor:pointer;user-select:none;
      transition:transform .12s ease,box-shadow .12s ease;
      background:linear-gradient(180deg,#fff,#FCFBFA);
    }
    .check.checked{
      background: linear-gradient(135deg,#FDE68A,#FFB6C1);
      color:#673147;font-weight:700;border:none;box-shadow:0 8px 22px rgba(255,182,193,0.15);
      transform:translateY(-2px);
    }
    .habit-title{font-weight:600}
    .tiny {font-size:12px;color:var(--muted)}
    .streak {font-size:12px;color:#FF7BAC;font-weight:600;margin-left:6px;}

    .right {display:flex;align-items:center;gap:8px}
    .remove{
      border:none;background:transparent;cursor:pointer;font-size:18px;color:#C46B79;padding:6px;border-radius:8px;
    }

    .side-card{
      background:var(--card);border-radius:12px;padding:14px;box-shadow:var(--shadow);
    }
    .progress{
      background:linear-gradient(180deg,#fbfbfb,#fff);border-radius:12px;padding:12px;margin-bottom:12px;
    }
    .bar {
      height:14px;background:#F4F4F6;border-radius:12px;overflow:hidden;margin-top:8px;
    }
    .bar-fill{
      height:100%;width:0%;background:linear-gradient(90deg,var(--accent-3),var(--accent));border-radius:12px;
      transition:width .45s cubic-bezier(.2,.9,.3,1);
      box-shadow:0 6px 18px rgba(150,150,170,0.06);
    }
    .preset-list{display:flex;flex-direction:column;gap:8px;margin-top:6px}
    .preset{
      padding:8px;border-radius:10px;border:1px dashed #f0e7e7;background:linear-gradient(180deg,#fff,#fff);
      cursor:pointer;font-size:14px;
    }

    footer{margin-top:14px;display:flex;justify-content:space-between;align-items:center;font-size:13px;color:var(--muted)}
    .small{font-size:12px;color:var(--muted)}

    @media (max-width:880px){
      .main{grid-template-columns:1fr;max-height:90vh;overflow:auto}
      .side-card{order:2}
    }
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="Tiny Habits tracker">
    <canvas id="confettiCanvas" style="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:10;"></canvas>
    <div class="bubble pink" aria-hidden="true"></div>
    <div class="bubble mint" aria-hidden="true"></div>

    <header>
      <div class="logo">‚ô°Tiny</div>
      <div>
        <h1>Tiny Habits</h1>
        <p class="lead">Small daily wins ‚Äî elegant and simple ‚ú®</p>
      </div>
    </header>

    <div class="main">
      <section class="tracker-card" aria-labelledby="tracker-heading">
        <div class="controls" >
          <input class="new-habit" id="newHabitInput" placeholder="Add a tiny habit (e.g. Read 10 min üìö)" />
          <button class="add" id="addBtn">Add</button>
        </div>

        <div class="habit-list" id="habitList" aria-live="polite"></div>

        <footer>
          <div class="small">Tip: Click a box to mark it done. It saves automatically.</div>
          <div class="small" id="countText">0 habits</div>
        </footer>
      </section>

      <aside class="side-card" aria-labelledby="stats-heading">
        <div class="progress">
          <strong id="progressText">Progress ‚Äî 0 / 0</strong>
          <div class="bar" aria-hidden="true">
            <div class="bar-fill" id="barFill" style="width:0%"></div>
          </div>
        </div>

        <div>
          <strong>Quick presets</strong>
          <div class="preset-list" id="presetList">
            <button class="preset">Drink water üíß</button>
            <button class="preset">Read 10 min üìö</button>
            <button class="preset">Stretch 2 min üßò</button>
            <button class="preset">Journal ‚úçÔ∏è</button>
          </div>
        </div>

        <div style="margin-top:12px;">
          <strong>Actions</strong>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button id="clearBtn" class="preset">Clear all</button>
            <button id="resetDayBtn" class="preset">Uncheck all</button>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <script>
    const LS_KEY = "tiny-habits-v3";
    const habitListEl = document.getElementById("habitList");
    const newHabitInput = document.getElementById("newHabitInput");
    const addBtn = document.getElementById("addBtn");
    const countText = document.getElementById("countText");
    const barFill = document.getElementById("barFill");
    const progressText = document.getElementById("progressText");
    const presetList = document.getElementById("presetList");
    const clearBtn = document.getElementById("clearBtn");
    const resetDayBtn = document.getElementById("resetDayBtn");

    let data = { habits: [] };
    function loadData(){ 
      try{ const raw = localStorage.getItem(LS_KEY); if(raw) data = JSON.parse(raw); } 
      catch(e){ console.error(e) } 
    }
    function saveData(){ localStorage.setItem(LS_KEY, JSON.stringify(data)); }

    function uid(){ return Date.now().toString(36)+Math.random().toString(36).slice(2,6); }
    function escapeHtml(text){ return text.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;"); }

    function updateUI(){
      habitListEl.innerHTML = "";
      data.habits.forEach(h=>{
        const row = document.createElement("div");
        row.className = "habit";
        row.innerHTML = `
          <div class="left">
            <div class="check ${h.done ? "checked":""}" data-id="${h.id}" role="button" aria-pressed="${h.done ? "true":"false"}">
              ${h.done ? "‚úì": "+"}
            </div>
            <div>
              <div class="habit-title">${escapeHtml(h.title)}</div>
              <div class="tiny">tiny habit<span class="streak">üî•${h.streak||0}</span></div>
            </div>
          </div>
          <div class="right">
            <button class="remove" data-id="${h.id}" title="remove">‚úï</button>
          </div>
        `;
        habitListEl.appendChild(row);
      });

      document.querySelectorAll(".check").forEach(el=>{
        el.onclick = ()=> toggleDone(el.dataset.id);
      });
      document.querySelectorAll(".remove").forEach(btn=>{
        btn.onclick = ()=> removeHabit(btn.dataset.id);
      });

      const total = data.habits.length;
      const done = data.habits.filter(h=>h.done).length;
      countText.textContent = `${total} habit${total===1?"":"s"}`;
      const pct = total===0?0:Math.round(done/total*100);
      barFill.style.width = pct+"%";
      progressText.textContent = `Progress ‚Äî ${done} / ${total} (${pct}%)`;
    }

    function addHabit(title){
      if(!title||!title.trim()) return;
      const habit = {id:uid(),title:title.trim(),done:false,streak:0,lastDoneDate:null};
      data.habits.push(habit); saveData(); updateUI();
      newHabitInput.value=""; newHabitInput.focus();
    }

    function removeHabit(id){ data.habits = data.habits.filter(h=>h.id!==id); saveData(); updateUI(); }

    function toggleDone(id){
      const h = data.habits.find(x=>x.id===id); if(!h) return;
      h.done = !h.done; const today = new Date().toDateString();
      if(h.done){
        const yesterday = new Date(Date.now()-86400000).toDateString();
        if(h.lastDoneDate === yesterday) h.streak=(h.streak||0)+1;
        else if(h.lastDoneDate!==today) h.streak=1;
        h.lastDoneDate = today;

        // confetti
        const el = document.querySelector(`.check[data-id="${h.id}"]`);
        const rect = el.getBoundingClientRect();
        createConfetti(rect.left+rect.width/2, rect.top+rect.height/2);
      }
      saveData(); updateUI();
    }

    function clearAll(){ if(!confirm("Delete all habits? This can't be undone.")) return; data.habits=[]; saveData(); updateUI(); }
    function uncheckAll(){ data.habits.forEach(h=>h.done=false); saveData(); updateUI(); }

    addBtn.onclick = ()=> addHabit(newHabitInput.value);
    newHabitInput.onkeydown = e=>{if(e.key==="Enter") addHabit(newHabitInput.value);}
    presetList.querySelectorAll(".preset").forEach(btn=>btn.onclick=()=>addHabit(btn.textContent.trim()));
    clearBtn.onclick=clearAll;
    resetDayBtn.onclick=uncheckAll;

    loadData();

    // daily reset
    const today = new Date().toDateString();
    const lastResetDate = localStorage.getItem("lastResetDate");
    if(lastResetDate!==today){
      data.habits.forEach(h=>{
        if(h.done && h.lastDoneDate===lastResetDate) h.streak=(h.streak||0)+1;
        else if(!h.done||h.lastDoneDate!==lastResetDate) h.streak=0;
        h.done=false;
      });
      localStorage.setItem("lastResetDate", today);
      saveData();
    }

    updateUI();

    // confetti
    const confettiCanvas = document.getElementById("confettiCanvas");
    const ctx = confettiCanvas.getContext("2d");
    let confettiPieces = [];
    function resizeCanvas(){ confettiCanvas.width=confettiCanvas.offsetWidth; confettiCanvas.height=confettiCanvas.offsetHeight; }
    window.addEventListener("resize", resizeCanvas); resizeCanvas();

    function createConfetti(x,y){
      for(let i=0;i<15;i++){
        confettiPieces.push({
          x:x, y:y,
          r:Math.random()*5+3,
          dx:(Math.random()-0.5)*4,
          dy:Math.random()*-4-1,
          color:["#FFB6C1","#FDE68A","#C7F9E6","#FF7BAC"][Math.floor(Math.random()*4)]
        });
      }
    }

    function updateConfetti(){
      ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
      for(let i=confettiPieces.length-1;i>=0;i--){
        const p=confettiPieces[i];
        p.x+=p.dx; p.y+=p.dy; p.dy+=0.1;
        ctx.fillStyle=p.color;
        ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
        if(p.y>confettiCanvas.height) confettiPieces.splice(i,1);
      }
      requestAnimationFrame(updateConfetti);
    }
    updateConfetti();
  </script>
</body>
</html>

